# Debugging GemFire Applications (Work in Progress, please ignore me)

This article provides some practical suggestions for debugging GemFire Applications.

## GemFire Artifacts
* clusterConfig and cache.xml - provided by the application developer to configure the caches and regions for GemFire client and server processes.
* properties files - provided by the application developer to configure system properties and membership discovery
* System logs - logs generated by GemFire clients, servers, and locators. The contain information about membership, client connections, warnings about outstanding message requests and errors.  The log also displays the system properties.
* Statistics - statistics archive files generated by GemFire clients and/or servers containing information about the GemFire application. GemFire VSD (Visual Statistics Display) is used to graph the GemFire and system metrics recorded in these archives. 

## Additional information which can be obtained from a running system
### gfsh - GemFire gfsh (pronounced "gee-fish") provides a command-line interface from which you can launch, manage, and monitor GemFire processes, data, and applications.  The shell provides commands useful in debugging (to bring all the information to one location) such as:
* export logs
* export stack-traces
* show log
* show dead-locks

### Stack dumps - When debugging, it is best to get stack dumps for all VMs.  To determine if progress is being made, execute multiple thread dumps several seconds apart for comparison.  The following command prints the stacks for all threads in the given pid to STDOUT (so these should be redirected to files named for each specific vm or pid).
``` 
$ kill -3 <pid>
```
### Tools to inspect hprof files and provide heap histograms and leak suspects
* [jhat](http://docs.oracle.com/javase/7/docs/technotes/tools/share/jhat.html)
* [Eclipse Memory Analyzer](https://eclipse.org/mat/)

## General Guidelines
1. Check your environment - Machine (O/S and System settings), JDK, JVM properties (-Xmx -Xms), GC parameters
1. Draw out a diagram of your system topology (servers, clients) and make a note of Listeners, Writers and other plug-ins.  
1. Verify your cache and region configuration
1. Confirm your system properties (in system log)
1. On your system topology diagram, add notes on the initialization and other processing being done in different classes of members.  If you are debugging a specific interaction between systems, draw a sequence diagram.

## Scan the system logs for suspect strings that can guide you to specific vms and potential problems
1. If possible, bring all the system logs and stack dumps together into a single directory for inspection (use gfsh commands above).
1. Search the system logs for warning, error or severe messages
1. Search the system logs for any underlying Exceptions (perhaps thrown from user supplied plug-ins).  For example: ConcurrentModificationException, NullPointerException, SerializationException.
1. Search the system logs for warnings about resources causing delays in statistics sampling.  If found, use VSD to investigate further.
```
[warning 2015/03/29 04:47:23.028 PDT gemfire1_w1-gst-dev26_15651 <Thread-5 StatSampler> tid=0x55] Statistics sampling thread detected a wakeup delay of 8,310 ms, indicating a possible resource issue. Check the GC, memory, and CPU statistics.
```
1. Verify there are no hotspot (hs_err*.log files) indicating a HotSpot error in the JVM
These are readable files that provide details about the HotSpot Error.
1. Verify that there are no heapdump (*.hprof) files or OutOfMemoryErrors.
Tools such as jhat and Eclipse MemoryAnalyzer can provide heap histograms and leak suspects.
1. Search the stack dumps for "Java-level deadlock".  Dumping the stacks (kill -3 <pid>) will also check for any Java-level deadlocks and display the issue prominently before dumps the stack traces
```
Found one Java-level deadlock:
=============================
"vm_4_thr_12_client2_w2-2013-lin-17_16924":
  waiting to lock monitor 0x00007f7758006758 (object 0x00000000f0e13970, a com.gemstone.gemfire.internal.cache.VersionedStatsDiskLRURegionEntryHeapStringKey2),
  which is held by "P2P message reader for w2-2013-lin-17(gemfire1_w2-2013-lin-17_16914:16914)<v2>:29644 shared ordered uid=10 port=34555"
"P2P message reader for w2-2013-lin-17(gemfire1_w2-2013-lin-17_16914:16914)<v2>:29644 shared ordered uid=10 port=34555":
  waiting to lock monitor 0x00007f77740068a8 (object 0x00000000f0d33470, a com.gemstone.gemfire.cache.query.internal.index.HashIndexSet),
  which is held by "P2P message reader for w2-2013-lin-17(gemfire1_w2-2013-lin-17_16910:16910)<v1>:44136 shared ordered uid=8 port=34528"
"P2P message reader for w2-2013-lin-17(gemfire1_w2-2013-lin-17_16910:16910)<v1>:44136 shared ordered uid=8 port=34528":
  waiting to lock monitor 0x00007f776405a878 (object 0x00000000f0e51780, a com.gemstone.gemfire.internal.cache.VersionedStatsDiskLRURegionEntryHeapStringKey2),
  which is held by "P2P message reader for w2-2013-lin-17(gemfire3_w2-2013-lin-17_16930:16930)<v1>:58930 shared ordered uid=9 port=34530"
"P2P message reader for w2-2013-lin-17(gemfire3_w2-2013-lin-17_16930:16930)<v1>:58930 shared ordered uid=9 port=34530":
  waiting to lock monitor 0x00007f77740068a8 (object 0x00000000f0d33470, a com.gemstone.gemfire.cache.query.internal.index.HashIndexSet),
  which is held by "P2P message reader for w2-2013-lin-17(gemfire1_w2-2013-lin-17_16910:16910)<v1>:44136 shared ordered uid=8 port=34528"

Java stack information for the threads listed above:
===================================================
"vm_4_thr_12_client2_w2-2013-lin-17_16924":
        at com.gemstone.gemfire.internal.cache.lru.NewLRUClockHand.getLRUEntry(NewLRUClockHand.java:212)
        - waiting to lock <0x00000000f0e13970> (a com.gemstone.gemfire.internal.cache.VersionedStatsDiskLRURegionEntryHeapStringKey2)
        at com.gemstone.gemfire.internal.cache.AbstractLRURegionMap.lruUpdateCallback(AbstractLRURegionMap.java:489)
        at com.gemstone.gemfire.internal.cache.DiskEntry$Helper.lruUpdateCallback(DiskEntry.java:874)
        at com.gemstone.gemfire.internal.cache.DiskEntry$Helper.faultInValue(DiskEntry.java:831)
        at com.gemstone.gemfire.internal.cache.AbstractOplogDiskRegionEntry.getValue(AbstractOplogDiskRegionEntry.java:66)
        at com.gemstone.gemfire.internal.cache.LocalRegion.getDeserialized(LocalRegion.java:1445)
        at com.gemstone.gemfire.internal.cache.LocalRegion$NonTXEntry.getValue(LocalRegion.java:9293)
        at com.gemstone.gemfire.internal.cache.EntriesSet$EntriesIterator.moveNext(EntriesSet.java:183)
        at com.gemstone.gemfire.internal.cache.EntriesSet$EntriesIterator.next(EntriesSet.java:137)
        at com.gemstone.gemfire.cache.query.internal.CompiledSelect.doNestedIterations(CompiledSelect.java:694)
        at com.gemstone.gemfire.cache.query.internal.CompiledSelect.doNestedIterations(CompiledSelect.java:698)
        at com.gemstone.gemfire.cache.query.internal.CompiledSelect.doIterationEvaluate(CompiledSelect.java:554)
        at com.gemstone.gemfire.cache.query.internal.CompiledSelect.evaluate(CompiledSelect.java:262)
        at com.gemstone.gemfire.cache.query.internal.DefaultQuery.executeUsingContext(DefaultQuery.java:422)
        at com.gemstone.gemfire.cache.query.internal.DefaultQuery.execute(DefaultQuery.java:257)
        at com.gemstone.gemfire.cache.query.internal.DefaultQuery.execute(DefaultQuery.java:195)
        at query.QueryTest.doQuery(QueryTest.java:1182)
        at query.QueryTest.doEntryAndQueryOperations(QueryTest.java:538)
        at query.QueryTest.HydraTask_doEntryAndQueryOperations(QueryTest.java:464)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
        at java.lang.reflect.Method.invoke(Method.java:601)
        at hydra.MethExecutor.execute(MethExecutor.java:189)
        at hydra.MethExecutor.execute(MethExecutor.java:153)
        at hydra.TestTask.execute(TestTask.java:194)
        at hydra.RemoteTestModule$1.run(RemoteTestModule.java:217)
"P2P message reader for w2-2013-lin-17(gemfire1_w2-2013-lin-17_16914:16914)<v2>:29644 shared ordered uid=10 port=34555":
        at com.gemstone.gemfire.cache.query.internal.index.HashIndexSet.add(HashIndexSet.java:375)
        - waiting to lock <0x00000000f0d33470> (a com.gemstone.gemfire.cache.query.internal.index.HashIndexSet)
        at com.gemstone.gemfire.cache.query.internal.index.HashIndex.basicAddMapping(HashIndex.java:223)
        at com.gemstone.gemfire.cache.query.internal.index.HashIndex.access$200(HashIndex.java:82)
        at com.gemstone.gemfire.cache.query.internal.index.HashIndex$IMQEvaluator.applyProjection(HashIndex.java:1314)
        at com.gemstone.gemfire.cache.query.internal.index.HashIndex$IMQEvaluator.doNestedIterations(HashIndex.java:1281)
        at com.gemstone.gemfire.cache.query.internal.index.HashIndex$IMQEvaluator.doNestedIterations(HashIndex.java:1291)
        at com.gemstone.gemfire.cache.query.internal.index.HashIndex$IMQEvaluator.evaluate(HashIndex.java:1146)
        at com.gemstone.gemfire.cache.query.internal.index.HashIndex.addMapping(HashIndex.java:173)
        at com.gemstone.gemfire.cache.query.internal.index.AbstractIndex.addIndexMapping(AbstractIndex.java:475)
        at com.gemstone.gemfire.cache.query.internal.index.IndexManager.processAction(IndexManager.java:984)
        at com.gemstone.gemfire.cache.query.internal.index.IndexManager.updateIndexes(IndexManager.java:905)
        at com.gemstone.gemfire.internal.cache.LocalRegion.basicPutPart2(LocalRegion.java:6152)
        at com.gemstone.gemfire.internal.cache.AbstractRegionMap.basicPut(AbstractRegionMap.java:2956)
        - locked <0x00000000f0e13970> (a com.gemstone.gemfire.internal.cache.VersionedStatsDiskLRURegionEntryHeapStringKey2)
        at com.gemstone.gemfire.internal.cache.AbstractLRURegionMap.basicPut(AbstractLRURegionMap.java:44)
        at com.gemstone.gemfire.internal.cache.LocalRegion.virtualPut(LocalRegion.java:5990)
        at com.gemstone.gemfire.internal.cache.DistributedRegion.virtualPut(DistributedRegion.java:374)
        at com.gemstone.gemfire.internal.cache.LocalRegionDataView.putEntry(LocalRegionDataView.java:118)
        at com.gemstone.gemfire.internal.cache.LocalRegion.basicUpdate(LocalRegion.java:5965)
        at com.gemstone.gemfire.internal.cache.AbstractUpdateOperation.doPutOrCreate(AbstractUpdateOperation.java:139)
        at com.gemstone.gemfire.internal.cache.AbstractUpdateOperation$AbstractUpdateMessage.basicOperateOnRegion(AbstractUpdateOperation.java:284)
        at com.gemstone.gemfire.internal.cache.AbstractUpdateOperation$AbstractUpdateMessage.operateOnRegion(AbstractUpdateOperation.java:252)
        at com.gemstone.gemfire.internal.cache.DistributedCacheOperation$CacheOperationMessage.basicProcess(DistributedCacheOperation.java:1112)
        at com.gemstone.gemfire.internal.cache.DistributedCacheOperation$CacheOperationMessage.process(DistributedCacheOperation.java:1011)
        at com.gemstone.gemfire.distributed.internal.DistributionMessage.scheduleAction(DistributionMessage.java:360)
        at com.gemstone.gemfire.distributed.internal.DistributionMessage.schedule(DistributionMessage.java:416)
        at com.gemstone.gemfire.distributed.internal.DistributionManager.scheduleIncomingMessage(DistributionManager.java:4044)
        at com.gemstone.gemfire.distributed.internal.DistributionManager.handleIncomingDMsg(DistributionManager.java:3656)
        at com.gemstone.gemfire.distributed.internal.DistributionManager$MyListener.messageReceived(DistributionManager.java:4906)
        at com.gemstone.gemfire.distributed.internal.membership.jgroup.JGroupMembershipManager.processMessage(JGroupMembershipManager.java:2128)
        at com.gemstone.gemfire.distributed.internal.membership.jgroup.JGroupMembershipManager.handleOrDeferMessage(JGroupMembershipManager.java:2036)
        at com.gemstone.gemfire.distributed.internal.membership.jgroup.JGroupMembershipManager$MyDCReceiver.messageReceived(JGroupMembershipManager.java:621)
        at com.gemstone.gemfire.distributed.internal.direct.DirectChannel.receive(DirectChannel.java:809)
        at com.gemstone.gemfire.internal.tcp.TCPConduit.messageReceived(TCPConduit.java:849)
        at com.gemstone.gemfire.internal.tcp.Connection.dispatchMessage(Connection.java:4025)
        at com.gemstone.gemfire.internal.tcp.Connection.processNIOBuffer(Connection.java:3599)
        at com.gemstone.gemfire.internal.tcp.Connection.runNioReader(Connection.java:1869)
        at com.gemstone.gemfire.internal.tcp.Connection.run(Connection.java:1745)
        at java.lang.Thread.run(Thread.java:722)
"P2P message reader for w2-2013-lin-17(gemfire1_w2-2013-lin-17_16910:16910)<v1>:44136 shared ordered uid=8 port=34528":
        at com.gemstone.gemfire.internal.cache.DiskEntry$Helper.getValueOffHeapOrDiskWithoutFaultIn(DiskEntry.java:751)
        - waiting to lock <0x00000000f0e51780> (a com.gemstone.gemfire.internal.cache.VersionedStatsDiskLRURegionEntryHeapStringKey2)
        at com.gemstone.gemfire.internal.cache.DiskEntry$Helper.getValueInVMOrDiskWithoutFaultIn(DiskEntry.java:739)
        at com.gemstone.gemfire.internal.cache.AbstractOplogDiskRegionEntry.getValueInVMOrDiskWithoutFaultIn(AbstractOplogDiskRegionEntry.java:71)
        at com.gemstone.gemfire.cache.query.internal.index.HashIndex.getTargetObjectForUpdate(HashIndex.java:816)
        at com.gemstone.gemfire.cache.query.internal.index.HashIndex.access$400(HashIndex.java:82)
        at com.gemstone.gemfire.cache.query.internal.index.HashIndex$IMQEvaluator.evaluateKey(HashIndex.java:1418)
        at com.gemstone.gemfire.cache.query.internal.index.HashIndex$HashStrategy.computeKey(HashIndex.java:1510)
        at com.gemstone.gemfire.cache.query.internal.index.HashIndexSet.rehash(HashIndexSet.java:593)
        at com.gemstone.gemfire.cache.query.internal.index.HashIndexSet.compact(HashIndexSet.java:942)
        at com.gemstone.gemfire.cache.query.internal.index.HashIndexSet.preInsertHook(HashIndexSet.java:1046)
        at com.gemstone.gemfire.cache.query.internal.index.HashIndexSet.add(HashIndexSet.java:395)
        - locked <0x00000000f0d33470> (a com.gemstone.gemfire.cache.query.internal.index.HashIndexSet)
        at com.gemstone.gemfire.cache.query.internal.index.HashIndex.basicAddMapping(HashIndex.java:223)
        at com.gemstone.gemfire.cache.query.internal.index.HashIndex.access$200(HashIndex.java:82)
        at com.gemstone.gemfire.cache.query.internal.index.HashIndex$IMQEvaluator.applyProjection(HashIndex.java:1314)
        at com.gemstone.gemfire.cache.query.internal.index.HashIndex$IMQEvaluator.doNestedIterations(HashIndex.java:1281)
        at com.gemstone.gemfire.cache.query.internal.index.HashIndex$IMQEvaluator.doNestedIterations(HashIndex.java:1291)
        at com.gemstone.gemfire.cache.query.internal.index.HashIndex$IMQEvaluator.evaluate(HashIndex.java:1146)
        at com.gemstone.gemfire.cache.query.internal.index.HashIndex.addMapping(HashIndex.java:173)
        at com.gemstone.gemfire.cache.query.internal.index.AbstractIndex.addIndexMapping(AbstractIndex.java:475)
        at com.gemstone.gemfire.cache.query.internal.index.IndexManager.processAction(IndexManager.java:984)
        at com.gemstone.gemfire.cache.query.internal.index.IndexManager.updateIndexes(IndexManager.java:905)
        at com.gemstone.gemfire.internal.cache.LocalRegion.basicPutPart2(LocalRegion.java:6152)
        at com.gemstone.gemfire.internal.cache.AbstractRegionMap.basicPut(AbstractRegionMap.java:2956)
        - locked <0x00000000f0e51b08> (a com.gemstone.gemfire.internal.cache.VersionedStatsDiskLRURegionEntryHeapStringKey2)
        at com.gemstone.gemfire.internal.cache.AbstractLRURegionMap.basicPut(AbstractLRURegionMap.java:44)
        at com.gemstone.gemfire.internal.cache.LocalRegion.virtualPut(LocalRegion.java:5990)
        at com.gemstone.gemfire.internal.cache.DistributedRegion.virtualPut(DistributedRegion.java:374)
        at com.gemstone.gemfire.internal.cache.LocalRegionDataView.putEntry(LocalRegionDataView.java:118)
        at com.gemstone.gemfire.internal.cache.LocalRegion.basicUpdate(LocalRegion.java:5965)
        at com.gemstone.gemfire.internal.cache.AbstractUpdateOperation.doPutOrCreate(AbstractUpdateOperation.java:139)
        at com.gemstone.gemfire.internal.cache.AbstractUpdateOperation$AbstractUpdateMessage.basicOperateOnRegion(AbstractUpdateOperation.java:284)
        at com.gemstone.gemfire.internal.cache.AbstractUpdateOperation$AbstractUpdateMessage.operateOnRegion(AbstractUpdateOperation.java:252)
        at com.gemstone.gemfire.internal.cache.DistributedCacheOperation$CacheOperationMessage.basicProcess(DistributedCacheOperation.java:1112)
        at com.gemstone.gemfire.internal.cache.DistributedCacheOperation$CacheOperationMessage.process(DistributedCacheOperation.java:1011)
        at com.gemstone.gemfire.distributed.internal.DistributionMessage.scheduleAction(DistributionMessage.java:360)
        at com.gemstone.gemfire.distributed.internal.DistributionMessage.schedule(DistributionMessage.java:416)
        at com.gemstone.gemfire.distributed.internal.DistributionManager.scheduleIncomingMessage(DistributionManager.java:4044)
        at com.gemstone.gemfire.distributed.internal.DistributionManager.handleIncomingDMsg(DistributionManager.java:3656)
        at com.gemstone.gemfire.distributed.internal.DistributionManager$MyListener.messageReceived(DistributionManager.java:4906)
        at com.gemstone.gemfire.distributed.internal.membership.jgroup.JGroupMembershipManager.processMessage(JGroupMembershipManager.java:2128)
        at com.gemstone.gemfire.distributed.internal.membership.jgroup.JGroupMembershipManager.handleOrDeferMessage(JGroupMembershipManager.java:2036)
        at com.gemstone.gemfire.distributed.internal.membership.jgroup.JGroupMembershipManager$MyDCReceiver.messageReceived(JGroupMembershipManager.java:621)
        at com.gemstone.gemfire.distributed.internal.direct.DirectChannel.receive(DirectChannel.java:809)
        at com.gemstone.gemfire.internal.tcp.TCPConduit.messageReceived(TCPConduit.java:849)
        at com.gemstone.gemfire.internal.tcp.Connection.dispatchMessage(Connection.java:4025)
        at com.gemstone.gemfire.internal.tcp.Connection.processNIOBuffer(Connection.java:3599)
        at com.gemstone.gemfire.internal.tcp.Connection.runNioReader(Connection.java:1869)
        at com.gemstone.gemfire.internal.tcp.Connection.run(Connection.java:1745)
        at java.lang.Thread.run(Thread.java:722)
"P2P message reader for w2-2013-lin-17(gemfire3_w2-2013-lin-17_16930:16930)<v1>:58930 shared ordered uid=9 port=34530":
        at com.gemstone.gemfire.cache.query.internal.index.HashIndexSet.add(HashIndexSet.java:375)
        - waiting to lock <0x00000000f0d33470> (a com.gemstone.gemfire.cache.query.internal.index.HashIndexSet)
        at com.gemstone.gemfire.cache.query.internal.index.HashIndex.basicAddMapping(HashIndex.java:223)
        at com.gemstone.gemfire.cache.query.internal.index.HashIndex.access$200(HashIndex.java:82)
        at com.gemstone.gemfire.cache.query.internal.index.HashIndex$IMQEvaluator.applyProjection(HashIndex.java:1314)
        at com.gemstone.gemfire.cache.query.internal.index.HashIndex$IMQEvaluator.doNestedIterations(HashIndex.java:1281)
        at com.gemstone.gemfire.cache.query.internal.index.HashIndex$IMQEvaluator.doNestedIterations(HashIndex.java:1291)
        at com.gemstone.gemfire.cache.query.internal.index.HashIndex$IMQEvaluator.evaluate(HashIndex.java:1146)
        at com.gemstone.gemfire.cache.query.internal.index.HashIndex.addMapping(HashIndex.java:173)
        at com.gemstone.gemfire.cache.query.internal.index.AbstractIndex.addIndexMapping(AbstractIndex.java:475)
        at com.gemstone.gemfire.cache.query.internal.index.IndexManager.processAction(IndexManager.java:1022)
        at com.gemstone.gemfire.cache.query.internal.index.IndexManager.updateIndexes(IndexManager.java:905)
        at com.gemstone.gemfire.internal.cache.LocalRegion.basicPutPart2(LocalRegion.java:6152)
        at com.gemstone.gemfire.internal.cache.AbstractRegionMap.basicPut(AbstractRegionMap.java:2956)
        - locked <0x00000000f0e51780> (a com.gemstone.gemfire.internal.cache.VersionedStatsDiskLRURegionEntryHeapStringKey2)
        at com.gemstone.gemfire.internal.cache.AbstractLRURegionMap.basicPut(AbstractLRURegionMap.java:44)
        at com.gemstone.gemfire.internal.cache.LocalRegion.virtualPut(LocalRegion.java:5990)
        at com.gemstone.gemfire.internal.cache.DistributedRegion.virtualPut(DistributedRegion.java:374)
        at com.gemstone.gemfire.internal.cache.LocalRegionDataView.putEntry(LocalRegionDataView.java:118)
        at com.gemstone.gemfire.internal.cache.LocalRegion.basicUpdate(LocalRegion.java:5965)
        at com.gemstone.gemfire.internal.cache.AbstractUpdateOperation.doPutOrCreate(AbstractUpdateOperation.java:176)
        at com.gemstone.gemfire.internal.cache.AbstractUpdateOperation$AbstractUpdateMessage.basicOperateOnRegion(AbstractUpdateOperation.java:284)
        at com.gemstone.gemfire.internal.cache.AbstractUpdateOperation$AbstractUpdateMessage.operateOnRegion(AbstractUpdateOperation.java:252)
        at com.gemstone.gemfire.internal.cache.DistributedCacheOperation$CacheOperationMessage.basicProcess(DistributedCacheOperation.java:1112)
        at com.gemstone.gemfire.internal.cache.DistributedCacheOperation$CacheOperationMessage.process(DistributedCacheOperation.java:1011)
        at com.gemstone.gemfire.distributed.internal.DistributionMessage.scheduleAction(DistributionMessage.java:360)
        at com.gemstone.gemfire.distributed.internal.DistributionMessage.schedule(DistributionMessage.java:416)
        at com.gemstone.gemfire.distributed.internal.DistributionManager.scheduleIncomingMessage(DistributionManager.java:4044)
        at com.gemstone.gemfire.distributed.internal.DistributionManager.handleIncomingDMsg(DistributionManager.java:3656)
        at com.gemstone.gemfire.distributed.internal.DistributionManager$MyListener.messageReceived(DistributionManager.java:4906)
        at com.gemstone.gemfire.distributed.internal.membership.jgroup.JGroupMembershipManager.processMessage(JGroupMembershipManager.java:2128)
        at com.gemstone.gemfire.distributed.internal.membership.jgroup.JGroupMembershipManager.handleOrDeferMessage(JGroupMembershipManager.java:2036)
        at com.gemstone.gemfire.distributed.internal.membership.jgroup.JGroupMembershipManager$MyDCReceiver.messageReceived(JGroupMembershipManager.java:621)
        at com.gemstone.gemfire.distributed.internal.direct.DirectChannel.receive(DirectChannel.java:809)
        at com.gemstone.gemfire.internal.tcp.TCPConduit.messageReceived(TCPConduit.java:849)
        at com.gemstone.gemfire.internal.tcp.Connection.dispatchMessage(Connection.java:4025)
        at com.gemstone.gemfire.internal.tcp.Connection.processNIOBuffer(Connection.java:3599)
        at com.gemstone.gemfire.internal.tcp.Connection.runNioReader(Connection.java:1869)
        at com.gemstone.gemfire.internal.tcp.Connection.run(Connection.java:1745)
        at java.lang.Thread.run(Thread.java:722)

Found 1 deadlock.
```
1. Search the system logs for any "15 seconds have elapsed messages" which don't have corresponding "wait for replies has completed" logs.  You can match these log messages together via the thread id or native thread id.
In this example, we can see that the request did complete, so while we should be concerned (and possibly check stats in vsd to see what system resources are causing this delay), it will not be the cause of our hang.
```
TBD
```
If the request is never satisfied (there is no corresponding 'wait for replies completed' message') as in the example below, look at the stack dumps for the non-responsive member.  There could be a Java-level deadlock within that vm.
```
TBD 
```
There can also be distributed deadlocks between members.  This requires following the "15 seconds have elapsed" warnings to the remote vms and looking at the stack dumps.  Searching for "waiting to lock" in the stack dumps can also lead you to the culprit
```
TBD
```

## Clients fail with ServerConnectivityExceptions
This can occur if servers are too busy to process client requests (for example with GC or distributed deadlocks).
* client connections expiration/timeout
* readTimeouts
```
TBD
```

## Tips for improving ability to debug during development

### pass in the vm and thread id as arguments (to be logged) during Function Execution
```
Example TBD
```
### Use of CacheListeners to log events as they are processed
```
Example TBD
```
### Use of CacheListeners in clients to trace server side processing
```
Example TBD
```